# AI å°é•‡ ğŸ ğŸ’»ğŸ’Œ

[åœ¨çº¿æ¼”ç¤º](https://www.convex.dev/ai-town)

[åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºDiscord: AI Stack Devs](https://discord.gg/PQUmTBTGmT)

<img width="1454" alt="Screen Shot 2023-08-14 at 10 01 00 AM" src="https://github.com/a16z-infra/ai-town/assets/3489963/a4c91f17-23ed-47ec-8c4e-9f9a8505057d">

AI å°é•‡æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„å°é•‡,AIè§’è‰²å±…ä½ã€èŠå¤©å’Œç¤¾äº¤çš„åœ°æ–¹ã€‚

è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªå¯éƒ¨ç½²çš„å…¥é—¨å·¥å…·åŒ…,å¯ä»¥è½»æ¾æ„å»ºå’Œå®šåˆ¶ä½ è‡ªå·±ç‰ˆæœ¬çš„ AI å°é•‡ã€‚
çµæ„Ÿæ¥è‡ªäºç ”ç©¶è®ºæ–‡[_Generative Agents: Interactive Simulacra of Human Behavior_](https://arxiv.org/pdf/2304.03442.pdf)ã€‚

è¯¥é¡¹ç›®çš„ä¸»è¦ç›®æ ‡é™¤äº†å·¥ä½œæœ¬èº«ä¼šå¾ˆæœ‰è¶£ä»¥å¤–,
è¿˜ä¸ºæ‹¥æœ‰æ‰å®åŸºç¡€çš„å¹³å°æä¾›äº†å¯æ‰©å±•çš„ç©ºé—´ã€‚
åç«¯åŸç”Ÿæ”¯æŒå…±äº«å…¨å±€çŠ¶æ€ã€äº‹åŠ¡å’Œæ¨¡æ‹Ÿå¼•æ“,
ä»ç®€å•çš„æ¸¸æˆé¡¹ç›®åˆ°å¯æ‰©å±•çš„å¤šäººæ¸¸æˆéƒ½æ˜¯åˆé€‚çš„ã€‚
æ¬¡è¦ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ª JS/TS æ¡†æ¶,å› ä¸ºè¿™ä¸ªé¢†åŸŸä¸­çš„å¤§å¤šæ•°æ¨¡æ‹Ÿå™¨
(åŒ…æ‹¬ä¸Šé¢æåˆ°çš„åŸå§‹è®ºæ–‡)éƒ½æ˜¯ç”¨ Python ç¼–å†™çš„ã€‚

## æ¦‚è§ˆ

- ğŸ’» [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- ğŸ§  [å®‰è£…](#å®‰è£…)
- ğŸ‘¤ [è‡ªå®šä¹‰ - è¿è¡Œä½ è‡ªå·±çš„æ¨¡æ‹Ÿä¸–ç•Œ](#è‡ªå®šä¹‰ä½ è‡ªå·±çš„æ¨¡æ‹Ÿ)
- ğŸ‘©â€ğŸ’» [éƒ¨ç½²](#éƒ¨ç½²è¯¥åº”ç”¨ç¨‹åº)
- ğŸ† [è‡´è°¢](#è‡´è°¢)

## æŠ€æœ¯æ ˆ

- æ¸¸æˆå¼•æ“ã€æ•°æ®åº“å’Œå‘é‡æœç´¢: [Convex](https://convex.dev/)
- è®¤è¯ (å¯é€‰): [Clerk](https://clerk.com/)
- é»˜è®¤çš„å¯¹è¯æ¨¡å‹æ˜¯ `llama3`ï¼ŒåµŒå…¥æ¨¡å‹æ˜¯ `mxbai-embed-large`ã€‚
- æœ¬åœ°æ¨ç†: [Ollama](https://github.com/jmorganca/ollama)
- å¯é…ç½®ä¸ºå…¶ä»–äº‘ç«¯ LLM: [Together.ai](https://together.ai/) æˆ–ä»»ä½•æ”¯æŒ [OpenAI API](https://platform.openai.com/) çš„æœåŠ¡ã€‚æ¬¢è¿æäº¤ PR ä»¥æ·»åŠ æ›´å¤šäº‘æœåŠ¡æ”¯æŒã€‚
- åƒç´ è‰ºæœ¯ç”Ÿæˆ: [Replicate](https://replicate.com/)ã€[Fal.ai](https://serverless.fal.ai/lora)
- èƒŒæ™¯éŸ³ä¹ç”Ÿæˆ: [Replicate](https://replicate.com/) ä½¿ç”¨ [MusicGen](https://huggingface.co/spaces/facebook/MusicGen)

## å®‰è£…

**æ³¨æ„**: è¿™ä¸ªé¡¹ç›®çš„ä¸€ä¸ªåˆ†æ”¯å¯åœ¨ [Pinokio](https://pinokio.computer/item?uri=https://github.com/cocktailpeanutlabs/aitown) ä¸Šä¸€é”®å®‰è£…,ä¾›æœ‰å…´è¶£è¿è¡Œä½†ä¸æƒ³ä¿®æ”¹çš„äººä½¿ç”¨ ğŸ˜

### 1. å…‹éš†ä»“åº“å¹¶å®‰è£…è½¯ä»¶åŒ…

```bash
git clone https://github.com/a16z-infra/ai-town.git
cd ai-town
npm install
```

### 2. ä½¿ç”¨ [Convex](https://convex.dev) è¿›è¡Œæœ¬åœ°å¼€å‘:

è¦ä¹ˆ [ä¸‹è½½é¢„æ„å»ºçš„äºŒè¿›åˆ¶æ–‡ä»¶(æ¨è)](https://github.com/get-convex/convex-backend/releases)ï¼Œ
è¦ä¹ˆ [ä»æºç æ„å»ºå¹¶è¿è¡Œ](https://stack.convex.dev/building-the-oss-backend)ã€‚

```sh
# å¯¹äºæ–°çš„ Mac æœºå™¨:
curl  -L -O https://github.com/get-convex/convex-backend/releases/latest/download/convex-local-backend-aarch64-apple-darwin.zip
unzip convex-local-backend-aarch64-apple-darwin.zip

brew install just

# è¿è¡ŒæœåŠ¡å™¨
./convex-local-backend
```

è¿™ä¹Ÿä¼š [å®‰è£… `just`](https://github.com/casey/just?tab=readme-ov-file#installation)
(ä¾‹å¦‚ `brew install just` æˆ– `cargo install just`)ã€‚
æˆ‘ä»¬ä½¿ç”¨ `just` å°±åƒ `make` ä¸€æ ·æ·»åŠ é¢å¤–çš„å‚æ•°,æ‰€ä»¥ä½ éœ€è¦è¿è¡Œ `just convex ...`
è€Œä¸æ˜¯ `npx convex ...` è¿›è¡Œæœ¬åœ°å¼€å‘ã€‚

å¦‚æœä½ åœ¨ Mac ä¸Šè¿è¡Œé¢„æ„å»ºçš„äºŒè¿›åˆ¶æ–‡ä»¶æ—¶å‡ºç° Apple è­¦å‘Š,
è¿›å…¥å®ƒæ‰€åœ¨çš„æ–‡ä»¶å¤¹,å³é”®å•å‡»å®ƒå¹¶é€‰æ‹©"æ‰“å¼€"ä»¥ç»•è¿‡è­¦å‘Šã€‚
ä»é‚£æ—¶èµ·ä½ å°±å¯ä»¥ä»å‘½ä»¤è¡Œè¿è¡Œå®ƒäº†ã€‚
æˆ–è€…ä½ ä¹Ÿå¯ä»¥ä»æºç ç¼–è¯‘å¹¶è¿è¡Œå®ƒ(å‚è§ä¸Šæ–‡)ã€‚

å¦‚æœä½ è¦é’ˆå¯¹äº‘æ‰˜ç®¡ç‰ˆæœ¬è¿›è¡Œå¼€å‘,è¯·ä¿®æ”¹ package.json è„šæœ¬,
å°† `just convex ...` æ”¹ä¸º `convex ...`ã€‚

### 3. è¦è¿è¡Œæœ¬åœ° LLM,è¯·ä¸‹è½½å¹¶è¿è¡Œ [Ollama](https://ollama.com/)ã€‚

ä½ å¯ä»¥è®©åº”ç”¨ç¨‹åºä¸€ç›´è¿è¡Œ,æˆ–è¿è¡Œ `ollama serve`ã€‚
å¦‚æœåº”ç”¨ç¨‹åºå·²ç»åœ¨è¿è¡Œ,`ollama serve` ä¼šå‘å‡ºè­¦å‘Šã€‚
è¿è¡Œ `ollama pull llama3` è®©å®ƒä¸‹è½½ `llama3`ã€‚
ä½¿ç”¨ `ollama run llama3` è¿›è¡Œæµ‹è¯•ã€‚
å¦‚æœä½ æƒ³è‡ªå®šä¹‰ä½¿ç”¨å“ªä¸ªæ¨¡å‹,è¯·è°ƒæ•´ convex/util/llm.ts æˆ–è®¾ç½®
`just convex env set LLM_MODEL # model`ã€‚
Ollama æ¨¡å‹é€‰é¡¹å¯åœ¨ [æ­¤å¤„](https://ollama.ai/library) æ‰¾åˆ°ã€‚

å¦‚æœä½ å‘ç°é€Ÿåº¦å˜æ…¢,ä½ å¯èƒ½éœ€è¦åœ¨ constants.ts ä¸­å°† `NUM_MEMORIES_TO_SEARCH` è®¾ç½®ä¸º `1`,
ä»¥å‡å°å¯¹è¯æç¤ºçš„å¤§å°ã€‚

æŸ¥çœ‹ `convex/config.ts` ä»¥é…ç½®è¦åœ¨ UI ä¸­æä¾›å“ªäº›æ¨¡å‹,
æˆ–è€…è®¾ç½®ä¸äº‘æ‰˜ç®¡çš„ LLM å¯¹è¯ã€‚

### 4. ä½¿ç”¨ Replicate æ·»åŠ èƒŒæ™¯éŸ³ä¹ (å¯é€‰)

ä¸ºäº†æ¯æ—¥ç”ŸæˆèƒŒæ™¯éŸ³ä¹,è¯·åœ¨
[Replicate](https://replicate.com/) ä¸Šåˆ›å»ºä¸€ä¸ªè´¦æˆ·,å¹¶åœ¨ä½ çš„ä¸ªäººèµ„æ–™çš„
[API Token é¡µé¢](https://replicate.com/account/api-tokens)åˆ›å»ºä¸€ä¸ªä»¤ç‰Œã€‚
`npx convex env set REPLICATE_API_TOKEN # token`
å¦‚æœä½ åœ¨è¿›è¡Œæœ¬åœ°å¼€å‘,è¯·ä½¿ç”¨ `just` è€Œä¸æ˜¯ `npx`ã€‚

### 5. è¿è¡Œä»£ç 

è¦åŒæ—¶è¿è¡Œå‰ç«¯å’Œåç«¯:

```bash
npm run dev
```

**æ³¨æ„**: å¦‚æœåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ convex æœåŠ¡å™¨ä¸Šå‡ºç°èŠ‚ç‚¹ç‰ˆæœ¬é”™è¯¯,è¯·ä½¿ç”¨ç‰ˆæœ¬ 18,è¿™æ˜¯æœ€ç¨³å®šçš„ç‰ˆæœ¬ã€‚ä¸€ç§æ–¹å¼æ˜¯ [å®‰è£… nvm](https://nodejs.org/en/download/package-manager) å¹¶è¿è¡Œ `nvm install 18` æˆ– `nvm use 18`ã€‚
```
åœ¨æ‰§è¡Œä¸Šè¿°çš„ `npm run dev` å’Œç¬¬ 2 æ­¥ä¸­çš„ `./convex-local-backend` ä¹‹å‰éƒ½è¦è¿™æ ·åšã€‚

ç°åœ¨ä½ å¯ä»¥è®¿é—® http://localhost:5173 äº†ã€‚

å¦‚æœä½ å¸Œæœ›å‰ç«¯å’Œ Convex åˆ†åˆ«åœ¨ä¸åŒçš„ç»ˆç«¯ä¸­è¿è¡Œ(åè€…ä¼šåœ¨ä¿å­˜åç«¯å‡½æ•°æ—¶åŒæ­¥),ä½ å¯ä»¥è¿è¡Œä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤:

```bash
npm run dev:frontend
npm run dev:backend
```

è¯¦æƒ…è¯·æŸ¥çœ‹ package.json,ä½† dev:backend è¿è¡Œçš„æ˜¯ `just convex dev`

**æ³¨æ„**: å¦‚æœçª—å£é—²ç½® 5 åˆ†é’Ÿå,æ¨¡æ‹Ÿå°†ä¼šæš‚åœã€‚
åŠ è½½é¡µé¢å°†ä¼šå–æ¶ˆæš‚åœã€‚
ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ UI ä¸­çš„æŒ‰é’®æ‰‹åŠ¨å†»ç»“å’Œè§£å†»ä¸–ç•Œã€‚
å¦‚æœä½ æƒ³åœ¨æ²¡æœ‰æµè§ˆå™¨çš„æƒ…å†µä¸‹è¿è¡Œä¸–ç•Œ,ä½ å¯ä»¥åœ¨ `convex/crons.ts` ä¸­æ³¨é‡Šæ‰"åœæ­¢éæ´»åŠ¨ä¸–ç•Œ"çš„ cron ä»»åŠ¡ã€‚

### è¿è¡Œ/æµ‹è¯•/è°ƒè¯•çš„å„ç§å‘½ä»¤

**åœæ­¢åç«¯,ä»¥é˜²æœ‰å¤ªå¤šæ´»åŠ¨**

è¿™å°†åœæ­¢è¿è¡Œå¼•æ“å’Œä»£ç†ã€‚ä½ ä»ç„¶å¯ä»¥è¿è¡ŒæŸ¥è¯¢å’Œå‡½æ•°è¿›è¡Œè°ƒè¯•ã€‚

```bash
just convex run testing:stop
```

**åœ¨åœæ­¢åç«¯åé‡æ–°å¯åŠ¨å®ƒ**

```bash
just convex run testing:resume
```

**å¦‚æœæ¸¸æˆå¼•æ“æˆ–ä»£ç†ç¨‹åºæ²¡æœ‰è¿è¡Œ,åˆ™å¯åŠ¨å¼•æ“**

```bash
just convex run testing:kick
```

**å­˜æ¡£ä¸–ç•Œ**

å¦‚æœä½ æƒ³é‡ç½®ä¸–ç•Œå¹¶ä»å¤´å¼€å§‹,ä½ å¯ä»¥å­˜æ¡£å½“å‰ä¸–ç•Œ:

```bash
just convex run testing:archive
```

ç„¶å,ä½ ä»ç„¶å¯ä»¥åœ¨ä»ªè¡¨æ¿ä¸­æŸ¥çœ‹ä¸–ç•Œçš„æ•°æ®,ä½†å¼•æ“å’Œä»£ç†ç¨‹åºå°†ä¸å†è¿è¡Œã€‚

ä½ å¯ä»¥ä½¿ç”¨ `init` åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ä¸–ç•Œã€‚

```bash
just convex run init
```

**æ¸…é™¤æ‰€æœ‰æ•°æ®åº“**

ä½ å¯ä»¥ä½¿ç”¨ `wipeAllTables` æµ‹è¯•å‡½æ•°æ¥æ¸…é™¤æ‰€æœ‰è¡¨ã€‚

```bash
just convex run testing:wipeAllTables
```

**æš‚åœä½ çš„åç«¯éƒ¨ç½²**

ä½ å¯ä»¥åœ¨ [ä»ªè¡¨æ¿](https://dashboard.convex.dev) ä¸Šè®¿é—®ä½ çš„éƒ¨ç½²è®¾ç½®,
æš‚åœå’Œå–æ¶ˆæš‚åœä½ çš„éƒ¨ç½²ã€‚è¿™å°†åœæ­¢æ‰€æœ‰ä»å®¢æˆ·ç«¯ã€è®¡åˆ’ä»»åŠ¡æˆ– cron ä½œä¸šè°ƒç”¨çš„å‡½æ•°ã€‚
å°†å…¶è§†ä¸ºæœ€åçš„æ‰‹æ®µ,å› ä¸ºä¸Šé¢æœ‰æ›´æ¸©å’Œçš„åœæ­¢æ–¹å¼ã€‚ä¸€æ—¦ä½ 

## è‡ªå®šä¹‰ä½ è‡ªå·±çš„æ¨¡æ‹Ÿ

æ³¨æ„:æ¯æ¬¡ä½ æ›´æ”¹è§’è‰²æ•°æ®æ—¶,ä½ éƒ½åº”è¯¥é‡æ–°è¿è¡Œ
`just convex run testing:wipeAllTables` ç„¶å
`npm run dev` å°†æ‰€æœ‰å†…å®¹é‡æ–°ä¸Šä¼ åˆ° Convexã€‚
è¿™æ˜¯å› ä¸ºè§’è‰²æ•°æ®åœ¨åˆå§‹åŠ è½½æ—¶ä¼šå‘é€åˆ° Convexã€‚
ä½†æ˜¯è¦æ³¨æ„ `just convex run testing:wipeAllTables` ä¼šåˆ é™¤ä½ æ‰€æœ‰çš„æ•°æ®ã€‚

1. åˆ›å»ºä½ è‡ªå·±çš„è§’è‰²å’Œæ•…äº‹: æ‰€æœ‰è§’è‰²å’Œæ•…äº‹ä»¥åŠä»–ä»¬çš„ç²¾çµè¡¨å¼•ç”¨éƒ½å­˜å‚¨åœ¨ [characters.ts](./data/characters.ts) ä¸­ã€‚ä½ å¯ä»¥ä»æ›´æ”¹è§’è‰²æè¿°å¼€å§‹ã€‚

2. æ›´æ–°ç²¾çµè¡¨: åœ¨ `data/characters.ts` ä¸­,ä½ ä¼šçœ‹åˆ°è¿™æ ·çš„ä»£ç :

```ts
export const characters = [
  {
    name: 'f1',
    textureUrl: '/assets/32x32folk.png',
    spritesheetData: f1SpritesheetData,
    speed: 0.1,
  },
  ...
];
```

ä½ åº”è¯¥ä¸ºä½ çš„è§’è‰²æ‰¾ä¸€ä¸ªç²¾çµè¡¨,å¹¶åœ¨å¯¹åº”çš„æ–‡ä»¶ä¸­å®šä¹‰ç²¾çµåŠ¨ä½œ/èµ„æº(åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­,`f1SpritesheetData` æ˜¯åœ¨ f1.ts ä¸­å®šä¹‰çš„)

3. æ›´æ–°èƒŒæ™¯(ç¯å¢ƒ): åœ°å›¾åœ¨ `convex/init.ts` ä¸­ä» `data/gentle.js` åŠ è½½ã€‚è¦æ›´æ–°åœ°å›¾,è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œ:

   - ä½¿ç”¨ [Tiled](https://www.mapeditor.org/) å°†åœ°å½¢å›¾å¯¼å‡ºä¸º JSON æ–‡ä»¶(å‘½åä¸º bgtiles å’Œ objmap çš„ä¸¤å±‚)
   - ä½¿ç”¨ `convertMap.js` è„šæœ¬å°† JSON è½¬æ¢ä¸ºå¼•æ“å¯ä»¥ä½¿ç”¨çš„æ ¼å¼ã€‚

```console
node data/convertMap.js <mapDataPath> <assetPath> <tilesetpxw> <tilesetpxh>
```

- `<mapDataPath>`: Tiled JSON æ–‡ä»¶çš„è·¯å¾„ã€‚
- `<assetPath>`: åœ°å½¢å›¾ç´ æå›¾åƒçš„è·¯å¾„ã€‚
- `<tilesetpxw>`: åœ°å½¢å›¾å®½åº¦(åƒç´ )ã€‚
- `<tilesetpxh>`: åœ°å½¢å›¾é«˜åº¦(åƒç´ )ã€‚
  ç”Ÿæˆ `converted-map.js`,ä½ å¯ä»¥åƒä½¿ç”¨ `gentle.js` ä¸€æ ·ä½¿ç”¨å®ƒã€‚

4. é€šè¿‡ä¿®æ”¹ `convex/music.ts` ä¸­çš„æç¤ºæ¥æ›´æ”¹èƒŒæ™¯éŸ³ä¹
5. åœ¨ `convex/crons.ts` ä¸­é€šè¿‡ä¿®æ”¹"ç”Ÿæˆæ–°èƒŒæ™¯éŸ³ä¹"ä½œä¸šæ¥æ›´æ”¹ç”Ÿæˆæ–°éŸ³ä¹çš„é¢‘ç‡

## ä½¿ç”¨äº‘ AI æä¾›å•†

é…ç½® `convex/util/llm.ts` æˆ–è®¾ç½®è¿™äº›ç¯å¢ƒå˜é‡:

```sh
# æœ¬åœ° Convex
just convex env set LLM_API_HOST # url
just convex env set LLM_MODEL # model
# äº‘ç«¯ Convex
npx convex env set LLM_API_HOST # url
npx convex env set LLM_MODEL # model
```

ç”±äºéœ€è¦æŒ‡å®šåµŒå…¥å‘é‡çš„ç»´åº¦,å› æ­¤åµŒå…¥æ¨¡å‹é…ç½®éœ€è¦åœ¨ [ä»£ç ](./convex/util/llm.ts) ä¸­æ›´æ”¹ã€‚

### å¯†é’¥

å¯¹äº Together.ai,è¯·è®¿é—® https://api.together.xyz/settings/api-keys
å¯¹äº OpenAI,è¯·è®¿é—® https://platform.openai.com/account/api-keys

## ä½¿ç”¨æ‰˜ç®¡çš„ Convex

ä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤åœ¨äº‘ç«¯è¿è¡Œ Convex åç«¯:

```sh
npx convex dev --once --configure
```

å¹¶æ›´æ–° `package.json` è„šæœ¬ä»¥åˆ é™¤ `just`:
å°† `just convex ...` æ”¹ä¸º `convex ...`ã€‚

ç„¶åä½ éœ€è¦ä½¿ç”¨ `npx convex env set` æˆ–åœ¨ä»ªè¡¨æ¿ä¸Šè®¾ç½®ä½ ä¹‹å‰åœ¨æœ¬åœ°ç¯å¢ƒä¸­è®¾ç½®çš„ä»»ä½•ç¯å¢ƒå˜é‡:
https://dashboard.convex.dev/deployment/settings/environment-variables

è¦è¿è¡Œå‘½ä»¤,è¯·ä½¿ç”¨ `npx convex ...`,ä»¥å‰ä½ ä½¿ç”¨çš„æ˜¯ `just convex ...`ã€‚

## éƒ¨ç½²è¯¥åº”ç”¨ç¨‹åº

### å°† Convex å‡½æ•°éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

åœ¨ä½ å¯ä»¥è¿è¡Œåº”ç”¨ç¨‹åºä¹‹å‰,ä½ éœ€è¦ç¡®ä¿ Convex å‡½æ•°å·²éƒ¨ç½²åˆ°å…¶ç”Ÿäº§ç¯å¢ƒä¸­ã€‚

1. è¿è¡Œ `npx convex deploy` å°† convex å‡½æ•°éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
2. è¿è¡Œ `npx convex run init --prod`

å¦‚æœä½ æœ‰ç°æœ‰æ•°æ®è¦æ¸…é™¤,ä½ å¯ä»¥è¿è¡Œ `npx convex run testing:wipeAllTables --prod`

### æ·»åŠ è®¤è¯(å¯é€‰)

ä½ å¯ä»¥é€šè¿‡ `git revert b44a436` æ¥æ·»åŠ  Clerk è®¤è¯ã€‚
æˆ–è€…åªéœ€æŸ¥çœ‹è¯¥ diff ä»¥äº†è§£ç§»é™¤å®ƒæ—¶æ‰€åšçš„æ›´æ”¹ã€‚

**åˆ›å»º Clerk è´¦æˆ·**

- è®¿é—® https://dashboard.clerk.com/ å¹¶ç‚¹å‡»"æ·»åŠ åº”ç”¨ç¨‹åº"
- ä¸ºä½ çš„åº”ç”¨ç¨‹åºå‘½åå¹¶é€‰æ‹©è¦ä¸ºç”¨æˆ·æä¾›çš„ç™»å½•æä¾›å•†
- åˆ›å»ºåº”ç”¨ç¨‹åº
- å°† `VITE_CLERK_PUBLISHABLE_KEY` å’Œ `CLERK_SECRET_KEY` æ·»åŠ åˆ° `.env.local`

```bash
VITE_CLERK_PUBLISHABLE_KEY=pk_***
CLERK_SECRET_KEY=sk_***
```

- è½¬åˆ° JWT æ¨¡æ¿å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ Convex æ¨¡æ¿ã€‚
- å¤åˆ¶ JWKS ç«¯ç‚¹ URL ä»¥ä¾›ä¸‹é¢ä½¿ç”¨ã€‚

```sh
npx convex env set CLERK_ISSUER_URL # ä¾‹å¦‚ https://your-issuer-url.clerk.accounts.dev/
```

### éƒ¨ç½²åˆ° Vercel

- åœ¨ Vercel ä¸Šæ³¨å†Œä¸€ä¸ªè´¦æˆ·,ç„¶å [å®‰è£… Vercel CLI](https://vercel.com/docs/cli)ã€‚
- **å¦‚æœä½ ä½¿ç”¨ Github Codespaces**: ä½ éœ€è¦ [å®‰è£… Vercel CLI](https://vercel.com/docs/cli) å¹¶é€šè¿‡è¿è¡Œ `vercel login` ä»ä½ çš„ codespaces cli è¿›è¡Œèº«ä»½éªŒè¯ã€‚
- ä½¿ç”¨ `vercel --prod` å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ° Vercelã€‚

## ä»äº‘ç«¯éƒ¨ç½²ä½¿ç”¨æœ¬åœ°æ¨ç†

æˆ‘ä»¬æ”¯æŒä½¿ç”¨ [Ollama](https://github.com/jmorganca/ollama) è¿›è¡Œå¯¹è¯ç”Ÿæˆã€‚
ä¸ºäº†è®©å®ƒå¯ä»¥é€šè¿‡ Web è®¿é—®,ä½ å¯ä»¥ä½¿ç”¨ Tunnelmole æˆ– Ngrok ç­‰å·¥å…·ã€‚

**ä½¿ç”¨ Tunnelmole**

[Tunnelmole](https://github.com/robbie-cahill/tunnelmole-client) æ˜¯ä¸€ä¸ªå¼€æºçš„éš§é“å·¥å…·ã€‚

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹é€‰é¡¹ä¹‹ä¸€å®‰è£… Tunnelmole:

- NPM: `npm install -g tunnelmole`
- Linux: `curl -s https://tunnelmole.com/sh/install-linux.sh | sudo bash`
- Mac: `curl -s https://tunnelmole.com/sh/install-mac.sh --output install-mac.sh && sudo bash install-mac.sh`
- Windows: ä½¿ç”¨ NPM å®‰è£…,æˆ–è€…å¦‚æœä½ æ²¡æœ‰å®‰è£… NodeJS,è¯·ä» [æ­¤å¤„](https://tunnelmole.com/downloads/tmole.exe) ä¸‹è½½ Windows çš„ `exe` æ–‡ä»¶,å¹¶å°†å…¶æ”¾åœ¨ä½ çš„ PATH ä¸­çš„æŸä¸ªä½ç½®ã€‚

å®‰è£…å®Œ Tunnelmole å,è¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
tmole 11434
```

Tunnelmole åœ¨è¿è¡Œæ­¤å‘½ä»¤ååº”è¯¥ä¼šè¾“å‡ºä¸€ä¸ªå”¯ä¸€çš„ urlã€‚

**ä½¿ç”¨ Ngrok**

Ngrok æ˜¯ä¸€ä¸ªæµè¡Œçš„å°é—­æºéš§é“å·¥å…·ã€‚

- [å®‰è£… Ngrok](https://ngrok.com/docs/getting-started/)

å®‰è£…å¹¶éªŒè¯ ngrok å,è¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
ngrok http http://localhost:11434
```

Ngrok åœ¨è¿è¡Œæ­¤å‘½ä»¤ååº”è¯¥ä¼šè¾“å‡ºä¸€ä¸ªå”¯ä¸€çš„ urlã€‚

**å°† Ollama ç«¯ç‚¹æ·»åŠ åˆ° Convex**

```sh
npx convex env set OLLAMA_HOST # ä¸Šä¸€æ­¥ä¸­çš„ tunnelmole/ngrok å”¯ä¸€ url
```

**æ›´æ–° Ollama åŸŸå**

Ollama æœ‰ä¸€ä¸ªå—ä¿¡ä»»åŸŸååˆ—è¡¨ã€‚æ·»åŠ  ngrok åŸŸå,è¿™æ ·å®ƒå°±ä¸ä¼šæ‹’ç»æµé‡ã€‚
æ›´å¤šè¯¦æƒ…è¯·æŸ¥çœ‹ ollama.aiã€‚

## è‡´è°¢

- è¯¥é¡¹ç›®ä¸­çš„æ‰€æœ‰äº¤äº’ã€èƒŒæ™¯éŸ³ä¹å’Œ <Game/> ç»„ä»¶ä¸­çš„æ¸²æŸ“éƒ½ç”± [PixiJS](https://pixijs.com/) æä¾›æ”¯æŒã€‚
- åœ°å½¢å›¾:
  - https://opengameart.org/content/16x16-game-assets by George Bailey
  - https://opengameart.org/content/16x16-rpg-tileset by hilau
- æˆ‘ä»¬ä½¿ç”¨äº† https://github.com/pierpo/phaser3-simple-rpg ä½œä¸ºè¯¥é¡¹ç›®çš„åŸå‹ã€‚è™½ç„¶æˆ‘ä»¬åæ¥é‡å†™äº†æ•´ä¸ªåº”ç”¨ç¨‹åº,ä½†éå¸¸æ„Ÿè°¢å®ƒæä¾›äº†ä¸€ä¸ªç®€å•çš„èµ·ç‚¹ã€‚
- åŸå§‹èµ„æºæ¥è‡ª [ansimuz](https://opengameart.org/content/tiny-rpg-forest)
- UI åŸºäº [Mounir Tohami](https://mounirtohami.itch.io/pixel-art-gui-elements) çš„åŸå§‹èµ„äº§

# ğŸ§‘â€ğŸ« ä»€ä¹ˆæ˜¯ Convex?

[Convex](https://convex.dev) æ˜¯ä¸€ä¸ªæ‰˜ç®¡çš„åç«¯å¹³å°,å†…ç½®æ•°æ®åº“,è®©ä½ å¯ä»¥ä½¿ç”¨
[TypeScript](https://docs.convex.dev/typescript) ç¼–å†™ä½ çš„
[æ•°æ®åº“æ¨¡å¼](https://docs.convex.dev/database/schemas) å’Œ
[æœåŠ¡å™¨å‡½æ•°](https://docs.convex.dev/functions)ã€‚æœåŠ¡å™¨ç«¯æ•°æ®åº“
[æŸ¥è¯¢](https://docs.convex.dev/functions/query-functions) ä¼šè‡ªåŠ¨
[ç¼“å­˜](https://docs.convex.dev/functions/query-functions#caching--reactivity) å’Œ
[è®¢é˜…](https://docs.convex.dev/client/react#reactivity) æ•°æ®,ä¸ºæˆ‘ä»¬çš„
[React å®¢æˆ·ç«¯](https://docs.convex.dev/client/react) æä¾›
[å®æ—¶ `useQuery` é’©å­](https://docs.convex.dev/client/react#fetching-data)ã€‚å®ƒè¿˜æ”¯æŒ
[Python](https://docs.convex.dev/client/python)ã€
[Rust](https://docs.convex.dev/client/rust)ã€
[ReactNative](https://docs.convex.dev/client/react-native) å’Œ
[Node](https://docs.convex.dev/client/javascript) å®¢æˆ·ç«¯,ä»¥åŠä¸€ä¸ªç®€å•çš„
[HTTP API](https://docs.convex.dev/http-api/)ã€‚

è¯¥æ•°æ®åº“æ”¯æŒ
[NoSQL é£æ ¼çš„æ–‡æ¡£](https://docs.convex.dev/database/document-storage) åŠ
[å¯é€‰çš„æ¨¡å¼éªŒè¯](https://docs.convex.dev/database/schemas)ã€
[å…³ç³»](https://docs.convex.dev/database/document-ids) å’Œ
[è‡ªå®šä¹‰ç´¢å¼•](https://docs.convex.dev/database/indexes/)
(åŒ…æ‹¬å¯¹åµŒå¥—å¯¹è±¡ä¸­çš„å­—æ®µå»ºç´¢å¼•)ã€‚

[`query`](https://docs.convex.dev/functions/query-functions) å’Œ
[`mutation`](https://docs.convex.dev/functions/mutation-functions) æœåŠ¡å™¨å‡½æ•°å¯¹æ•°æ®åº“å…·æœ‰äº‹åŠ¡æ€§ã€
ä½å»¶è¿Ÿè®¿é—®æƒé™,å¹¶åˆ©ç”¨æˆ‘ä»¬çš„
[`v8` è¿è¡Œæ—¶](https://docs.convex.dev/functions/runtimes) å’Œ
[ç¡®å®šæ€§ä¿æŠ¤](https://docs.convex.dev/functions/runtimes#using-randomness-and-time-in-queries-and-mutations)
æä¾›æœ€å¼ºçš„ ACID ä¿è¯:
å³æ—¶ä¸€è‡´æ€§ã€
å¯ä¸²è¡ŒåŒ–éš”ç¦»å’Œé€šè¿‡
[ä¹è§‚å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶](https://docs.convex.dev/database/advanced/occ) (OCC / MVCC) å®ç°çš„
è‡ªåŠ¨å†²çªè§£å†³ã€‚

[`action` æœåŠ¡å™¨å‡½æ•°](https://docs.convex.dev/functions/actions) å¯ä»¥è®¿é—®å¤–éƒ¨ API å¹¶æ”¯æŒå…¶ä»–ä¾§æ•ˆåº”å’Œéç¡®å®šæ€§è¡Œä¸º,è¿™äº›å‡½æ•°å¯ä»¥åœ¨æˆ‘ä»¬ä¼˜åŒ–è¿‡çš„ `v8` è¿è¡Œæ—¶æˆ–æ›´çµæ´»çš„ `node` è¿è¡Œæ—¶ä¸­æ‰§è¡Œã€‚

å‡½æ•°å¯ä»¥é€šè¿‡[è°ƒåº¦](https://docs.convex.dev/scheduling/scheduled-functions)å’Œ [cron ä½œä¸š](https://docs.convex.dev/scheduling/cron-jobs)åœ¨åå°è¿è¡Œã€‚

å¼€å‘æ˜¯äº‘ä¼˜å…ˆçš„,é€šè¿‡ [CLI](https://docs.convex.dev/cli) è¿›è¡Œ[æœåŠ¡å™¨å‡½æ•°çƒ­é‡è½½ç¼–è¾‘](https://docs.convex.dev/cli#run-the-convex-dev-server)ã€[é¢„è§ˆéƒ¨ç½²](https://docs.convex.dev/production/hosting/preview-deployments)ã€[æ—¥å¿—å’Œå¼‚å¸¸æŠ¥å‘Šé›†æˆ](https://docs.convex.dev/production/integrations/)ã€‚
è¿˜æœ‰ä¸€ä¸ª [ä»ªè¡¨æ¿ UI](https://docs.convex.dev/dashboard) ç”¨äº[æµè§ˆå’Œç¼–è¾‘æ•°æ®](https://docs.convex.dev/dashboard/deployments/data)ã€[ç¼–è¾‘ç¯å¢ƒå˜é‡](https://docs.convex.dev/production/environment-variables)ã€[æŸ¥çœ‹æ—¥å¿—](https://docs.convex.dev/dashboard/deployments/logs)ã€[è¿è¡ŒæœåŠ¡å™¨å‡½æ•°](https://docs.convex.dev/dashboard/deployments/functions)ç­‰ã€‚

å®ƒå†…ç½®äº†[å“åº”å¼åˆ†é¡µ](https://docs.convex.dev/database/pagination)ã€[æ–‡ä»¶å­˜å‚¨](https://docs.convex.dev/file-storage)ã€[å“åº”å¼æ–‡æœ¬æœç´¢](https://docs.convex.dev/text-search)ã€[å‘é‡æœç´¢](https://docs.convex.dev/vector-search)ã€[https ç«¯ç‚¹](https://docs.convex.dev/functions/http-actions) (ç”¨äº webhooks)ã€[å¿«ç…§å¯¼å…¥/å¯¼å‡º](https://docs.convex.dev/database/import-export/)ã€[æµå¼å¯¼å…¥/å¯¼å‡º](https://docs.convex.dev/production/integrations/streaming-import-export) å’Œ[è¿è¡Œæ—¶éªŒè¯](https://docs.convex.dev/database/schemas#validators) (ç”¨äº[å‡½æ•°å‚æ•°](https://docs.convex.dev/functions/args-validation)å’Œ[æ•°æ®åº“æ•°æ®](https://docs.convex.dev/database/schemas#schema-validation) )ç­‰åŠŸèƒ½ã€‚

ä¸€åˆ‡éƒ½ä¼šè‡ªåŠ¨æ‰©å±•,å¹¶ä¸”[å…è´¹å¼€å§‹ä½¿ç”¨](https://www.convex.dev/plans)ã€‚